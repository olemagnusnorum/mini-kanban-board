{"ast":null,"code":"var _jsxFileName = \"/Users/ole-magnusnorum/Documents/IT_verket/prep/ProjectBoard/projectboard-frontend/src/components/projectbard.js\";\nimport Column from \"./column\";\nimport React, { Component } from \"react\"; //muligen ha alle projects state her og hvilken colonne de hører til, slik at jeg kan pase ned riktig\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProjectBoard extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      backlogProjects: [],\n      inProgressProjects: [],\n      doneProjects: [],\n      inputBox: false\n    };\n\n    this.addProjects = () => {\n      this.setState({\n        inputBox: true\n      });\n      console.log(this.state.inputBox);\n    };\n\n    this.cancelProject = () => {\n      this.setState({\n        inputBox: false\n      });\n    };\n\n    this.moveRight = (id, fromColumn) => {\n      var project;\n\n      if (fromColumn == \"in-progress\") {\n        project = this.state.inProgressProjects.filter(item => item.projectId == id)[0];\n        const newProjectList = this.state.inProgressProjects.filter(item => item.projectId !== id);\n        this.setState({\n          inProgressProjects: newProjectList,\n          backlogProjects: [...this.state.backlogProjects, project]\n        });\n      }\n\n      if (fromColumn == \"done\") {\n        project = this.state.doneProjects.filter(item => item.projectId == id)[0];\n        const newProjectList = this.state.doneProjects.filter(item => item.projectId !== id);\n        this.setState({\n          doneProjects: newProjectList,\n          inProgressProjects: [...this.state.inProgressProjects, project]\n        });\n      }\n    };\n  }\n\n  async componentDidMount() {\n    var backlog = [];\n    var inProgress = [];\n    var done = [];\n    console.log(\"inif\");\n    var data = await this.fetchProjects();\n    data.map(d => {\n      const project = {\n        projectId: d.id,\n        projectName: d.name,\n        projectDescription: d.description,\n        projectStage: d.stage\n      };\n\n      if (d.stage == \"backlog\") {\n        backlog.push(project);\n      }\n\n      if (d.stage == \"in-progress\") {\n        inProgress.push(project);\n      }\n\n      if (d.stage == \"done\") {\n        console.log(\"if done\");\n        done.push(project);\n      }\n    });\n    this.setState({\n      backlogProjects: [...this.state.backlogProjects, ...backlog],\n      inProgressProjects: [...this.state.inProgressProjects, ...inProgress],\n      doneProjects: [...this.state.doneProjects, ...done]\n    });\n  } //må bruke DELETE fetch\n\n\n  async removeProjectReal(id, column) {\n    if (column == \"backlog\") {\n      const response = await this.deleteProject(id);\n      const newProjectList = this.state.backlogProjects.filter(item => item.projectId !== id);\n      this.setState({\n        backlogProjects: newProjectList\n      });\n    }\n\n    if (column == \"in-progress\") {\n      const response = await this.deleteProject(id);\n      const newProjectList = this.state.inProgressProjects.filter(item => item.projectId !== id);\n      this.setState({\n        inProgressProjects: newProjectList\n      });\n    }\n\n    if (column == \"done\") {\n      const response = await this.deleteProject(id);\n      const newProjectList = this.state.doneProjects.filter(item => item.projectId !== id);\n      this.setState({\n        doneProjects: newProjectList\n      });\n    }\n  }\n\n  //her må vi poste til backend\n  async saveProject(newProject) {\n    const body = {\n      Name: newProject.projectName,\n      Description: newProject.projectDescription,\n      Stage: \"backlog\"\n    };\n    const data = await this.postProject(body); //need to have data on right format\n\n    const project = {\n      projectId: data.id,\n      projectName: data.name,\n      projectDescription: data.description,\n      projectStage: data.stage\n    };\n    this.setState({\n      backlogProjects: [...this.state.backlogProjects, project],\n      inputBox: false\n    });\n  }\n\n  async moveLeft(id, fromColumn) {\n    var project;\n    var body;\n\n    if (fromColumn == \"backlog\") {\n      project = this.state.backlogProjects.filter(item => item.projectId == id)[0];\n      body = {\n        Name: project.projectName,\n        Description: project.Description,\n        Stage: \"in-progress\"\n      };\n      const data = await this.putProject(id, body);\n      project = {\n        projectID: data.id,\n        projectName: data.name,\n        projectDescription: data.description,\n        projectStage: data.stage\n      };\n      const newProjectList = this.state.backlogProjects.filter(item => item.projectId !== id);\n      this.setState({\n        backlogProjects: newProjectList,\n        inProgressProjects: [...this.state.inProgressProjects, project]\n      });\n    }\n\n    if (fromColumn == \"in-progress\") {\n      project = this.state.inProgressProjects.filter(item => item.projectId == id)[0];\n      const newProjectList = this.state.inProgressProjects.filter(item => item.projectId !== id);\n      this.setState({\n        inProgressProjects: newProjectList,\n        doneProjects: [...this.state.doneProjects, project]\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"projectboard\",\n      children: [/*#__PURE__*/_jsxDEV(Column, {\n        id: \"done\",\n        name: \"Done\",\n        inputBox: this.state.inputBox,\n        projects: this.state.doneProjects,\n        removeProjectReal: this.removeProjectReal.bind(this),\n        addProjects: this.addProjects,\n        saveProject: this.saveProject.bind(this),\n        cancelProject: this.cancelProject,\n        moveLeft: this.moveLeft.bind(this),\n        moveRight: this.moveRight\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        id: \"in-progress\",\n        name: \"In Progress\",\n        inputBox: this.state.inputBox,\n        projects: this.state.inProgressProjects,\n        removeProjectReal: this.removeProjectReal.bind(this),\n        addProjects: this.addProjects,\n        saveProject: this.saveProject.bind(this),\n        cancelProject: this.cancelProject,\n        moveLeft: this.moveLeft.bind(this),\n        moveRight: this.moveRight\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Column, {\n        id: \"backlog\",\n        name: \"Backlog\",\n        inputBox: this.state.inputBox,\n        projects: this.state.backlogProjects,\n        removeProjectReal: this.removeProjectReal.bind(this),\n        addProjects: this.addProjects,\n        saveProject: this.saveProject.bind(this),\n        cancelProject: this.cancelProject,\n        moveLeft: this.moveLeft.bind(this),\n        moveRight: this.moveRight\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }, this);\n  }\n\n  async fetchProjects() {\n    console.log(\"in fetch\");\n    const response = await fetch('http://localhost:5000/api/projects');\n    return response.json();\n  }\n\n  async postProject(body) {\n    console.log(\"in save\");\n    const response = await fetch('http://localhost:5000/api/projects', {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    });\n    return response.json();\n  }\n\n  async deleteProject(id) {\n    const response = await fetch(`http://localhost:5000/api/projects/${id}`, {\n      method: 'DELETE',\n      mode: 'cors'\n    });\n    return response;\n  }\n\n  async putProject(id, body) {\n    const response = await fetch(`http://localhost:5000/api/projects/${id}`, {\n      method: 'PUT',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    });\n    return response;\n  }\n\n}\n\nexport default ProjectBoard;","map":{"version":3,"sources":["/Users/ole-magnusnorum/Documents/IT_verket/prep/ProjectBoard/projectboard-frontend/src/components/projectbard.js"],"names":["Column","React","Component","ProjectBoard","state","backlogProjects","inProgressProjects","doneProjects","inputBox","addProjects","setState","console","log","cancelProject","moveRight","id","fromColumn","project","filter","item","projectId","newProjectList","componentDidMount","backlog","inProgress","done","data","fetchProjects","map","d","projectName","name","projectDescription","description","projectStage","stage","push","removeProjectReal","column","response","deleteProject","saveProject","newProject","body","Name","Description","Stage","postProject","moveLeft","putProject","projectID","render","bind","fetch","json","method","mode","headers","JSON","stringify"],"mappings":"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","sourcesContent":["import Column from \"./column\"\nimport React, {Component} from \"react\"\n\n\n//muligen ha alle projects state her og hvilken colonne de hører til, slik at jeg kan pase ned riktig\n\n\nclass ProjectBoard extends Component {\n\n    state = {\n        backlogProjects: [],\n        inProgressProjects: [],\n        doneProjects: [],\n        inputBox: false\n    }\n\n\n    async componentDidMount() {\n       \n        var backlog = []\n        var inProgress = []\n        var done = []\n        \n        console.log(\"inif\")\n        var data = await this.fetchProjects()\n        data.map(d => {\n            const project = {projectId: d.id, projectName: d.name, projectDescription: d.description, projectStage: d.stage}\n            if (d.stage == \"backlog\"){\n                backlog.push(project)\n            }\n            if (d.stage == \"in-progress\"){\n                inProgress.push(project)\n            }\n            if (d.stage == \"done\"){\n                console.log(\"if done\")\n                done.push(project)\n            }\n        })\n        \n        this.setState({backlogProjects: [...this.state.backlogProjects, ...backlog],\n                    inProgressProjects: [...this.state.inProgressProjects, ...inProgress],\n                    doneProjects: [...this.state.doneProjects, ...done]})\n\n    }\n    \n    \n\n    //må bruke DELETE fetch\n    async removeProjectReal(id, column) {\n        if (column == \"backlog\"){\n            const response = await this.deleteProject(id)\n            const newProjectList = this.state.backlogProjects.filter((item) => item.projectId !== id );\n            this.setState({\n                backlogProjects: newProjectList\n            })\n        }\n        if (column == \"in-progress\"){\n            const response = await this.deleteProject(id)\n            const newProjectList = this.state.inProgressProjects.filter((item) => item.projectId !== id );\n            this.setState({\n                inProgressProjects: newProjectList\n            })\n        }\n        if (column == \"done\"){\n            const response = await this.deleteProject(id)\n            const newProjectList = this.state.doneProjects.filter((item) => item.projectId !== id );\n            this.setState({\n                doneProjects: newProjectList\n            })\n        }\n\n\n    }\n    \n     \n    addProjects = () => {\n        this.setState({\n            inputBox: true\n        })\n        console.log(this.state.inputBox)\n    }\n    \n    \n    //her må vi poste til backend\n    async saveProject(newProject) {\n        const body = { Name: newProject.projectName, Description: newProject.projectDescription, Stage: \"backlog\"}\n        const data = await this.postProject(body)\n        //need to have data on right format\n        const project = {projectId: data.id, projectName: data.name, projectDescription: data.description, projectStage: data.stage}\n        this.setState({\n            backlogProjects: [...this.state.backlogProjects, project],\n            inputBox: false\n    })\n    }\n\n    cancelProject = () => {\n        this.setState({\n            inputBox: false\n        })\n    }\n\n    async moveLeft(id, fromColumn){\n        var project;\n        var body;\n        if (fromColumn == \"backlog\"){\n            project = this.state.backlogProjects.filter((item) => item.projectId == id )[0];\n            body = {Name: project.projectName, Description: project.Description, Stage: \"in-progress\"}\n            const data = await this.putProject(id, body)\n            project = {projectID: data.id, projectName: data.name, projectDescription: data.description, projectStage: data.stage}\n            const newProjectList = this.state.backlogProjects.filter((item) => item.projectId !== id );\n            this.setState({\n                backlogProjects: newProjectList,\n                inProgressProjects: [...this.state.inProgressProjects, project]\n            })\n        }\n        if (fromColumn == \"in-progress\"){\n            project = this.state.inProgressProjects.filter((item) => item.projectId == id )[0];\n            const newProjectList = this.state.inProgressProjects.filter((item) => item.projectId !== id );\n            this.setState({\n                inProgressProjects: newProjectList,\n                doneProjects: [...this.state.doneProjects, project]\n            })\n        }\n    }\n\n    moveRight = (id, fromColumn) => {\n        var project;\n        if (fromColumn == \"in-progress\"){\n            project = this.state.inProgressProjects.filter((item) => item.projectId == id )[0];\n            const newProjectList = this.state.inProgressProjects.filter((item) => item.projectId !== id );\n            this.setState({\n                inProgressProjects: newProjectList,\n                backlogProjects: [...this.state.backlogProjects, project]\n            })\n        }\n        if (fromColumn == \"done\"){\n            project = this.state.doneProjects.filter((item) => item.projectId == id )[0];\n            const newProjectList = this.state.doneProjects.filter((item) => item.projectId !== id );\n            this.setState({\n                doneProjects: newProjectList,\n                inProgressProjects: [...this.state.inProgressProjects, project]\n            })\n        }\n\n\n    }\n\n\n\n    render(){\n        return(\n            <div className=\"projectboard\">\n                <Column id=\"done\" name=\"Done\"\n                    inputBox={this.state.inputBox}\n                    projects={this.state.doneProjects}\n                    removeProjectReal={this.removeProjectReal.bind(this)}\n                    addProjects={this.addProjects}\n                    saveProject={this.saveProject.bind(this)}\n                    cancelProject={this.cancelProject}\n                    moveLeft={this.moveLeft.bind(this)}\n                    moveRight={this.moveRight}/>\n                \n                <Column id=\"in-progress\" name=\"In Progress\"\n                    inputBox={this.state.inputBox}\n                    projects={this.state.inProgressProjects}\n                    removeProjectReal={this.removeProjectReal.bind(this)}\n                    addProjects={this.addProjects}\n                    saveProject={this.saveProject.bind(this)}\n                    cancelProject={this.cancelProject}\n                    moveLeft={this.moveLeft.bind(this)}\n                    moveRight={this.moveRight}/>\n                \n                <Column id=\"backlog\" name=\"Backlog\"\n                    inputBox={this.state.inputBox}\n                    projects={this.state.backlogProjects}\n                    removeProjectReal={this.removeProjectReal.bind(this)}\n                    addProjects={this.addProjects}\n                    saveProject={this.saveProject.bind(this)}\n                    cancelProject={this.cancelProject}\n                    moveLeft={this.moveLeft.bind(this)}\n                    moveRight={this.moveRight}/>\n                    \n            </div> \n        );\n    }\n\n\n\n\n    async fetchProjects() {\n        console.log(\"in fetch\")\n        const response = await fetch('http://localhost:5000/api/projects');\n        return response.json();\n        \n    }\n\n    async postProject(body){\n        console.log(\"in save\")\n        const response = await fetch('http://localhost:5000/api/projects', {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n                'Content-Type': 'application/json'\n              },\n            body: JSON.stringify(body)\n        })\n        return response.json()\n        \n    }\n\n    async deleteProject(id){\n        const response = await fetch(`http://localhost:5000/api/projects/${id}`, {\n            method: 'DELETE',\n            mode: 'cors',\n        })\n        return response\n    }\n\n    async putProject(id, body){\n        const response = await fetch(`http://localhost:5000/api/projects/${id}`, {\n            method: 'PUT',\n            mode: 'cors',\n            headers: {\n                'Content-Type': 'application/json'\n              },\n            body: JSON.stringify(body)\n\n        })\n        return response\n\n    }\n\n\n}\n\n\n\nexport default ProjectBoard"]},"metadata":{},"sourceType":"module"}